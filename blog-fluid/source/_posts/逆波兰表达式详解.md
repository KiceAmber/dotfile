---
title: 逆波兰表达式详解
date: 2022-10-07 16:22:20
tags:
  - 栈
  - 算法
categories: 零珠碎玉
---


### 逆波兰表达式

逆波兰表达式(Reverse Polish Notation,RPN)，也被称为 **后缀表达式**，常用语计算机科学和计算器领域

常规的算式例如：*25+20\*100-8/4*，机器是无法像人一样进行计算的，需要转化成易于机器解析和计算的格式，也就是逆波兰表达式，并且转化后的表达式不包含括号，计算过程更简单直接

将常规的算式转化为逆波兰表达式的步骤：

- 首先创建一个空栈和一个空数组
- 从左到右遍历算式表达式(操作数或者运算符)：
	- 如果是操作数，就直接加入到数组中
	- 如果是运算符：
		- 若是栈为空，或者栈顶元素为左括号 "("，就直接将当前运算符入栈
		- 若是该运算符的优先级大于栈顶符号的优先级，就直接将该运算符入栈
		- 若是该运算符优先级小于等于栈顶符号的优先级，就先将栈顶运算符弹出，并加入到数组中，重复这个过程直到当前运算符可以入栈
	- 如果是左括号，就直接入栈
	- 如果是右括号，在遇到栈顶元素为左括号前，将栈顶元素重复弹出并加入到数组中，最后遇到左括号时，将左括号弹出，但是不加入到数组中
- 最后遍历完算式后，如果栈中还有运算符，就依次弹出并加入到数组中

这样逆波兰表达式就转化完成了，上述的 *25+20\*100-8/4* 转化后的逆波兰表达式就是 *25 20 100 \* + 8 4 / -*

得到逆波兰表达式后，机器就可以根据该表达式计算结果，计算的步骤如下：

- 新建一个栈，从左到右遍历逆波兰表达式
- 如果是操作数，就直接入栈
- 如果是操作符，就从栈中弹出两个操作数，按照运算符进行计算，并将结果入栈
- 遍历结束后，栈中仅剩下一个元素，即为最终的计算结果

> 逆波兰表达式：  *25 20 100 \* + 8 4 / -*
> 
> 遍历逆波兰表达式：
> 
>1. 遇到操作数 25，入栈： [25]
>2. 遇到操作数 20，入栈： [25, 20]
>3. 遇到操作数 100，入栈： [25, 20, 100]
>4. 遇到运算符 \*，从栈中弹出两个操作数 20 和 100，计算 20 * 100 = 2000，将结果入栈： [25, 2000]
>5. 遇到运算符 +，从栈中弹出两个操作数 25 和 2000，计算 25 + 2000 = 2025，将结果入栈： [2025]
>6. 遇到操作数 8，入栈： [2025, 8]
>7. 遇到操作数 4，入栈： [2025, 8, 4]
>8. 遇到运算符 /，从栈中弹出两个操作数 8 和 4，计算 8 / 4 = 2，将结果入栈： [2025, 2]
>9. 遇到运算符 -，从栈中弹出两个操作数 2025 和 2，计算 2025 - 2 = 2023，将结果入栈： [2023]
>
>最终栈中仅剩下一个元素，即为计算结果，也就是 2023


